<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>链原——以太坊系统 | EIGHTJIU</title><meta name="author" content="kizy"><meta name="copyright" content="kizy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="以太坊系统以太坊区块链系统架构以太坊区块链系统依然是P2P体系结构，即对等网络结构 以太坊系统每个节点都可以存储完整的区块链与账本数据，每个节点都可以发起和监听以太坊网络上的交易信息，验证每个交易和区块的合法性； 每个节点都可以交易的形式发布智能合约，智能合约将存储于区块链中，加载到每个节点上的以太坊虚拟机EVM中执行 虽然每个以太坊系统节点上都安装了对等的以太坊系统软件，但是每个节点可以自由选择">
<meta property="og:type" content="article">
<meta property="og:title" content="链原——以太坊系统">
<meta property="og:url" content="https://kizzy899.github.io/2024/12/11/%E9%93%BE%E5%8E%9F%E2%80%94%E2%80%94%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%B3%BB%E7%BB%9F/index.html">
<meta property="og:site_name" content="EIGHTJIU">
<meta property="og:description" content="以太坊系统以太坊区块链系统架构以太坊区块链系统依然是P2P体系结构，即对等网络结构 以太坊系统每个节点都可以存储完整的区块链与账本数据，每个节点都可以发起和监听以太坊网络上的交易信息，验证每个交易和区块的合法性； 每个节点都可以交易的形式发布智能合约，智能合约将存储于区块链中，加载到每个节点上的以太坊虚拟机EVM中执行 虽然每个以太坊系统节点上都安装了对等的以太坊系统软件，但是每个节点可以自由选择">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://kizzy899.github.io/cover/cover9.jpg">
<meta property="article:published_time" content="2024-12-11T14:48:15.000Z">
<meta property="article:modified_time" content="2024-12-14T20:38:47.356Z">
<meta property="article:author" content="kizy">
<meta property="article:tag" content="区块链">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://kizzy899.github.io/cover/cover9.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "链原——以太坊系统",
  "url": "https://kizzy899.github.io/2024/12/11/%E9%93%BE%E5%8E%9F%E2%80%94%E2%80%94%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%B3%BB%E7%BB%9F/",
  "image": "https://kizzy899.github.io/cover/cover9.jpg",
  "datePublished": "2024-12-11T14:48:15.000Z",
  "dateModified": "2024-12-14T20:38:47.356Z",
  "author": [
    {
      "@type": "Person",
      "name": "kizy",
      "url": "https://kizzy899.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/tubiao.png"><link rel="canonical" href="https://kizzy899.github.io/2024/12/11/%E9%93%BE%E5%8E%9F%E2%80%94%E2%80%94%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%B3%BB%E7%BB%9F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '链原——以太坊系统',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/_custom/custom.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/aaaset/page.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/aaaset/touxiang.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">57</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/search/"><i class="fa-fw fas fa-search"></i><span> Search</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> link</span></a></li><li><a class="site-page child" href="/star/"><i class="fa-fw fas fa-star"></i><span> star</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/cover/cover9.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">EIGHTJIU</span></a><a class="nav-page-title" href="/"><span class="site-name">链原——以太坊系统</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/search/"><i class="fa-fw fas fa-search"></i><span> Search</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> link</span></a></li><li><a class="site-page child" href="/star/"><i class="fa-fw fas fa-star"></i><span> star</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">链原——以太坊系统</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-12-11T14:48:15.000Z" title="发表于 2024-12-11 22:48:15">2024-12-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-12-14T20:38:47.356Z" title="更新于 2024-12-15 04:38:47">2024-12-15</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="以太坊系统"><a href="#以太坊系统" class="headerlink" title="以太坊系统"></a>以太坊系统</h2><h3 id="以太坊区块链系统架构"><a href="#以太坊区块链系统架构" class="headerlink" title="以太坊区块链系统架构"></a><strong>以太坊区块链系统架构</strong></h3><p><strong>以太坊区块链系统依然是P2P体系结构，即对等网络结构</strong></p>
<p><strong>以太坊系统每个节点都可以存储完整的区块链与账本数据，每个节点都可以发起和监听以太坊网络上的交易信息，验证每个交易和区块的合法性；</strong></p>
<p><strong>每个节点都可以交易的形式发布智能合约，智能合约将存储于区块链中，加载到每个节点上的以太坊虚拟机EVM中执行</strong></p>
<p>虽然每个以太坊系统节点上都安装了对等的以太坊系统软件，但是每个节点可以自由选择启动以太坊系统的不同功能，从而属于不同的节点类型，在区块链网络中扮演不同的角色。目前，以太坊系统的节点总体上可以分为<strong>“全节点”、“轻节点”、“存档节点”</strong>等类型，其中发挥核心作用的是<strong>全节点。</strong></p>
<p>【1】</p>
<h4 id="系统逻辑架构"><a href="#系统逻辑架构" class="headerlink" title="系统逻辑架构"></a><strong>系统逻辑架构</strong></h4><p>【2】</p>
<p>以太坊系统的存储层主要采用文件系统和LevelDB Key-Value数据库，为以太坊系统相关的区块链、分布式账本、智能合约、X.509数字证书、日志、配置文件等数据提供高效、可靠持久化存储服务。</p>
<p>以太坊系统的数据层是系统核心功能层级之一，对以太坊系统核心的区块、区块链、交易、账本、账户、地址、状态树、交易树、收据树等关键数据结构进行定义和处理，负责将交易打包进区块，由区块组成区块链，并构建了状态树、交易树、收据树等数据结构。同时以太坊系统采用了传统的账户&#x2F;余额模型构建账本数据，更加易于理解，并基于底层的存储服务提供对以太坊区块链数据的安全读写访问管理。</p>
<p><strong>以太坊系统的网络层是系统核心功能层级之一，主要采用结构化P2P网络</strong>，基于Kademlia分布式哈希表协议，实现网络节点快速发现与连接，以及区块、交易数据的分发与同步，为以太坊系统各网络节点之间提供节点发现与安全连接通信机制，为交易、区块信息在区块链网络所有节点之间提供高效传播与有效性验证机制。</p>
<p><strong>以太坊系统的共识层</strong>是系统核心功能层级之一，系统前期版本采用与比特币系统类似的PoW工作量证明共识机制，但是对PoW共识算法进行了改进优化，没有采用比特币系统单纯依赖算力的双SHA-256哈希计算，而是使用了同时依赖于算力和内存容量的ETHash算法，系统后期版本计划支持算力无关的PoS权益证明共识机制。</p>
<p><strong>以太坊系统的激励层</strong>在共识层的功能基础上，采用无总量限制的以太币发行机制，与比特币系统的激励机制不同，除了出块激励外，还增加了叔块激励和交易服务费等激励机制。</p>
<p><strong>以太坊系统的合约层</strong>首次定义并提供了强大的智能合约功能，智能合约可以基于Solidity等多种图灵完备的编程语言开发实现，并提供了专用的以太坊虚拟机EVM作为智能合约的安全隔离运行环境。</p>
<p><strong>以太坊系统的接口层</strong>提供了基于JSON RPC、Web3.js的SDK接口和命令行接口。</p>
<p>   <strong>以太坊系统的应用层</strong>基于接口层提供的SDK接口，可以基于以太坊区块链实现面向多种应用场景和业务逻辑的公有链或DApp去中心化应用。</p>
<h3 id="以太坊系统数据层"><a href="#以太坊系统数据层" class="headerlink" title="以太坊系统数据层"></a><strong>以太坊系统数据层</strong></h3><h4 id="区块与区块链"><a href="#区块与区块链" class="headerlink" title="区块与区块链"></a><strong>区块与区块链</strong></h4><p><strong>以太坊区块的区块体除了包含交易列表外，还包含一个特殊的叔区块（Uncle Block）头部分。</strong></p>
<p>【4】</p>
<p>【3】</p>
<h4 id="账本数据"><a href="#账本数据" class="headerlink" title="账本数据"></a><strong>账本数据</strong></h4><ul>
<li><p>以太坊的分布式账本采用了传统记账系统的账户模型，即每个用户对应一个直接记录余额的账户，交易中附带有参与交易的账户的信息。以太坊用账户来记录系统状态，包括每个账户存储余额信息、智能合约代码和内部数据存储等。</p>
</li>
<li><p>相比于比特币的UTXO模型，以太坊所采用的传统账户&#x2F;余额模型显然更易于理解和进行智能合约的编程。</p>
</li>
<li><p>以太坊的每一个账户都由公钥密码机制生成的一对公私钥进行定义，账户地址是采用一种SHA-3（Keccak-256）哈希算法对公钥数据进行哈希计算的32字节结果的后20字节数据的40位十六进制字符表示。</p>
<p>【5】</p>
</li>
</ul>
<p><strong>以太坊系统有两类账户：</strong></p>
<p>  <strong>(1) 外部账户EOA（Externally Owned Account）</strong>**</p>
<p>​    <strong>外部账户是给以太币拥有者分配的账户，拥有该账户的用户可以通过账户对应的私钥创建和签署交易，发送消息至其他外部账户或合约账户。</strong></p>
<p>  <strong>(2) 合约账户COA（Contract Account）</strong></p>
<p>​    <strong>合约账户是一种特殊用途的账户，用于存储执行的智能合约代码，只能被外部账户触发从而执行其对应的合约代码，从而执行各种预先定义好的操作。</strong></p>
<h4 id="交易数据"><a href="#交易数据" class="headerlink" title="交易数据"></a>交易数据</h4><h4 id="状态数据"><a href="#状态数据" class="headerlink" title="状态数据"></a><strong>状态数据</strong></h4><p>  在以太坊系统中，所有账户（外部账户与合约账户）的状态共同构成了以太坊系统的状态。以太坊系统用一棵采用默克尔帕特里夏MPT树型数据结构定义的“全局状态树”来保存每个区块产生时系统的状态，并在当时的区块中保存了状态树的根哈希。</p>
<ul>
<li><p>状态树中的每个叶子节点都表示一个账户状态，当新区块被产生时，状态树的根哈希值将被写入区块中，期间只会有小部分的账户状态会发生改变，状态树中只有部分节点状态会改变。</p>
</li>
<li><p>为了节省存储空间，并不是每个区块都独立构建一棵状态树，而是共享状态树的节点数据，针对发生改变的节点状态，会新建一些分支，而不是更新原节点的状态数据，历史状态数据都将被保留。</p>
</li>
</ul>
<h3 id="以太坊系统网络层"><a href="#以太坊系统网络层" class="headerlink" title="以太坊系统网络层"></a><strong>以太坊系统网络层</strong></h3><h4 id="P2P网络结构与节点"><a href="#P2P网络结构与节点" class="headerlink" title="P2P网络结构与节点"></a><strong>P2P网络结构与节点</strong></h4><p>以太坊系统网络层位于数据层之上、共识层之下，是系统的核心功能层次之一，主要提供以下网络管理功能：</p>
<p>  (1) 区块链P2P网络的组网管理</p>
<p>  (2) 各网络节点的节点发现、连接与通信管理</p>
<p>  (3) 新区块或交易数据广播管理</p>
<p>  (4) 各网络节点之间区块链数据同步管理</p>
<p><strong>(1)全节点</strong></p>
<p>​    <strong>以太坊系统的网络全节点需要保存全链数据，全节点所需的储存空间也在不断增长。</strong></p>
<p>​    <strong>以太坊系统网络全节点的主要工作包括：</strong></p>
<p>​    • 将系统所有区块链与状态数据存储在节点本地，建立全链数据副本，可以根据请求为网络提供任何公开数据。</p>
<p>​    • 接收并验证新区块数据，若新区块通过验证，就保存在本地的区块链中，并向其它邻近节点广播区块数据。</p>
<p>​    • 接收并验证其他帐户或去中心化应用DApp发出的交易数据，若新交易通过验证，就保存在本地的交易池中，并向其它邻近节点广播交易数据。</p>
<p>   • 通过求解指定的PoW工作量证明计算难题来竞争新区块的出块权，从而获得以太币激励，并把多条交易记录打包写入新区块。</p>
<p>   • 对存储在区块链中的智能合约进行部署与执行。</p>
<p><strong>（2) 轻节点</strong></p>
<p>​    以太坊系统网络轻节点不需储存和维护完整的区块链数据副本，只存储所有的区块头数据，可以通过检验区块头中包含的状态树根哈希，并按需向全节点请求相关区块链信息，从而验证数据的有效性。轻节点一般用于发送或传递交易信息，对节点的CPU计算性能、内存容量、磁盘容量、运行稳定性都要求较低。</p>
<p><strong>(3) 存档节点</strong></p>
<p>​    存档节点存储了所有全节点保存的内容，同时创建了历史状态的档案，存档节点不参与竞争出块权的共识计算，一般只提供状态查询服务，例如，如果要查询一个账户在以太坊区块高度1000000时的以太币余额，就要查询一个存档节点。</p>
<h4 id="节点发现管理"><a href="#节点发现管理" class="headerlink" title="节点发现管理"></a><strong>节点发现管理</strong></h4><h4 id="节点连接管理"><a href="#节点连接管理" class="headerlink" title="节点连接管理"></a><strong>节点连接管理</strong></h4><p>​    <strong>以太坊网络的节点连接涉及到Peer（对等节点）、Session（会话）、Capability（能力）等基本概念。</strong></p>
<p>  (1) Peer：在以太坊系统的P2P网络中，Peer与节点（Node）是不同层次的对象，节点更底层，在NodeTable中进行管理，Peer是建立TCP连接会话的对象。</p>
<p>  (2) Session：在以太坊系统的P2P网络中，Session是节点连接管理中最重要的结构，Session表示Peer之间真正建立了连接后的逻辑关系。</p>
<p>  (3) Capability：指节点能支持的功能，表示以太坊系统在P2P网络通信层之上的业务能力，P2P网络只提供节点之间的连接通道，具体要传输什么数据，由节点支持的Capability决定，此外，由于以太坊系统经过多次升级，不同节点上安装运行的以太坊系统版本可能不同，为了实现系统向后兼容，节点连接时需要确定都可以支持的Capability集合。</p>
<h4 id="交易广播"><a href="#交易广播" class="headerlink" title="交易广播"></a><strong>交易广播</strong></h4><p>在以太坊系统的P2P网络中，交易的广播过程如下：</p>
<p>  (1) 每个节点会针对每个邻近节点维护一个待发送交易列表TxsA和已知交易列表TxsB；</p>
<p>  (2) 当节点接收到一个新交易Tx时，会先查询哪些邻近节点没有该交易信息，并将交易Tx加入邻近节点对应的待发送交易列表TxsA中；</p>
<p>  (3) 节点向每个待发送交易列表TxsA不为空的节点异步发送交易；</p>
<p>  (4) 交易发送成功后，会将被发出的交易加入对应邻近节点的已知交易列表TxsB。</p>
<h4 id="交易池"><a href="#交易池" class="headerlink" title="交易池"></a><strong>交易池</strong></h4><p><strong>以太坊系统也有交易池机制，交易池中的交易信息来源主要包括：</strong></p>
<p>  <strong>(1)本地提交：通过第三方应用调用以太坊网络节点本地的RPC服务提交的交易。</strong></p>
<p>  <strong>(2)广播同步：通过交易广播与同步，将其它节点的交易数据同步到该节点交易池。</strong></p>
<p>注意：当节点在竞争计算出块权时，会从交易池中获取并验证数条交易信息打包到区块中，如果节点成功获得出块权，新区块会被广播，此时新区块中包含的交易信息不会马上从交易池中删除，直到新区块被以太坊系统区块链确认，新区块中包含的交易才会从交易池中删除。如果以太坊系统的区块链发生了分叉，写进分叉的区块中包含的交易也不会从交易池中删除，而是继续在交易池中等待重新打包。</p>
<h4 id="区块广播与同步"><a href="#区块广播与同步" class="headerlink" title="区块广播与同步"></a><strong>区块广播与同步</strong></h4><p>(1) 节点A假如连接了n个节点，从相邻节点中选出sqrt(n)个节点广播包含完整区块信息的消息，向剩余的sqrt(n)个节点只广播区块哈希的消息；</p>
<p>(2) 收到到节点A广播的完整区块信息的节点，会将收到的区块加入等待验证的区块队列；</p>
<p>(3) 收到节点A广播的区块哈希的节点，根据需要可以从发送给它消息的节点A那里获取对应的完整区块，获取区块后再加入到等待验证的区块队列；</p>
<p>(4) 等待验证的区块队列中的区块经过验证确认后，最终插入节点本地区块链，节点再将新区块哈希广播给与它相连但还不知道该新区块的节点。</p>
<h3 id="以太坊系统共识层"><a href="#以太坊系统共识层" class="headerlink" title="以太坊系统共识层"></a>以太坊系统共识层</h3><h4 id="PoW工作量证明共识机制"><a href="#PoW工作量证明共识机制" class="headerlink" title="PoW工作量证明共识机制"></a><strong>PoW工作量证明共识机制</strong></h4><p>以太坊采用了Ethash算法作为其工作量证明算法。Ethash算法具有与算力大小和内存容量均相关的特性。</p>
<h4 id="PoS共识机制"><a href="#PoS共识机制" class="headerlink" title="PoS共识机制"></a><strong>PoS共识机制</strong></h4><p><strong>每一轮记账权由当时具有最高权益值的节点获得，最高权益值的计算并不仅仅依赖于节点算力的高低</strong></p>
<h3 id="以太坊系统激励层"><a href="#以太坊系统激励层" class="headerlink" title="以太坊系统激励层"></a><strong>以太坊系统激励层</strong></h3><p><strong>(1)</strong> <strong>加密货币总量无限制</strong>：以太坊系统并没有规定以太币的供应上限。</p>
<p><strong>(2)</strong> <strong>出块激励</strong>：以太坊系统没有出块奖励减半机制，以太坊系统上线之初每个新区块的出块奖励为5个以太币。在以太坊系统第三个阶段（大都会阶段），出块奖励调整过两次：2017年10月的拜占庭升级，出块奖励由5个以太币降为3个；2019年3月的君士坦丁堡升级，出块奖励由3个以太币降为2个；未来以太坊的出块奖励可能还会继续调整。</p>
<p><strong>(3)</strong> <strong>叔块激励</strong>：为了提高系统的交易性能，以太坊系统把出块时间缩短到平均10秒左右，更短的出块时间意味着在同一时刻，可能出现多个节点都求解出难题获得了新区块的记账权，但是在这些新区块中，只有一个将成为最长链上的区块，而其它区块，如果能被后续区块引用，将被称为叔块。</p>
<p><strong>(4)</strong> <strong>交易激励</strong>：在以太坊系统中，每一次交易的执行都需要消耗一定的费用，这个费用被命名为“燃料（Gas）”，Gas的值并不直接使用以太币ETH表示，而是使用GWei作为单位，</p>
<p>  <strong>例如：8 GWei &#x3D; 0.000000008 ETH</strong></p>
<p>   <strong>在以太坊系统的交易数据中有Gas的单价（Price）与需要消耗的Gas数量（GasLimit）属性，交易费用的计算公式如下：</strong></p>
<p>   <strong>交易费 &#x3D; Gas的单价 × 消耗的Gas数量</strong></p>
<p>   在以太坊系统中，交易可分为转账类型与智能合约相关类型，<strong>每一笔转账类型的交易，无论转账数额大小，系统规定最少消耗21000个 Gas数量</strong>，如果要在交易中额外添加备注信息，需要消耗额外的 Gas数量。</p>
<h4 id="l叔块机制"><a href="#l叔块机制" class="headerlink" title="l叔块机制"></a>l<strong>叔块机制</strong></h4><h3 id="以太坊系统合约层"><a href="#以太坊系统合约层" class="headerlink" title="以太坊系统合约层"></a><strong>以太坊系统合约层</strong></h3><h4 id="智能合约机制"><a href="#智能合约机制" class="headerlink" title="智能合约机制"></a><strong>智能合约机制</strong></h4><p>以太坊智能合约是一种采用Solidity语言开发的程序，经过编译的合约程序，只能通过以太坊合约账户以交易的形式发布到区块链上，交易信息中将附带合约程序的全部二进制字节码数据，并被打包保存到区块中，因此利用区块链的特性，智能合约一旦发布，合约的签订方就不可能被篡改或抵赖。</p>
<p><strong>以太坊系统合约层提供对智能合约的全生命周期管理，包括合约的创建、合约的部署运行、合约的调用执行、合约的作废。</strong></p>
<h3 id="课后"><a href="#课后" class="headerlink" title="课后"></a>课后</h3><p><strong>（一）填空题</strong></p>
<p><strong>1. 在以太坊系统中，每个区块由      、     和      三部分组成。</strong></p>
<p><strong>2. 以太币的标准单位是      ，最小单位是      ，1个标准单位的以太币等于       个最小单位的以太币。</strong></p>
<p><strong>3. 以太坊网络中存在      、       、      等不同类型的节点，其中      节点所需的存储空间最大。</strong></p>
<p><strong>4. 在以太坊系统中，账户分为       和       两类。</strong></p>
<p><strong>5. 在以太坊系统中，创建智能合约类型交易的交易接收方地址值为      。</strong></p>
<p><strong>6. 以太坊智能合约的全生命周期包括      、      、      和合约的作废。</strong></p>
<p><strong>（二）选择题</strong></p>
<p><strong>1. 在以太坊系统区块链的每个区块中不包含（   ）的哈希值。</strong></p>
<p><strong>A. 父区块      B. 交易树根      C. 子区块       D. 收据树根</strong></p>
<p><strong>2. 以太坊系统采用（   ）模型构建分布式账本，即每个用户都有直接的余额信息。</strong></p>
<p><strong>A. UTXO      B. 账户       C. 数据库       D. 会计</strong></p>
<p><strong>3. 以太坊系统是使用（   ）作为账户的唯一索引标识。</strong></p>
<p><strong>A. 地址      B. 伪随机数     C. 账户编号      D. 随机数</strong></p>
<p><strong>4. 在以太坊系统中，用于保存用户拥有的以太币余额的账户是（   ）。</strong></p>
<p><strong>A. 合约账户    B. 外部账户     C. 普通账户      D. 交易账户</strong></p>
<p><strong>5. 在以太坊系统中，交易可以分为多种类型，下面不属于以太坊交易类型的是（   ）。</strong></p>
<p><strong>A. 转账支付    B. 创建合约     C. 创建账户      D. 调用合约</strong></p>
<p><strong>6. 以太坊系统采用的共识机制主要依赖节点的（    ）进行出块权的竞争计算。</strong>**</p>
<p><strong>A. 算力      B. 内存容量     C. 算力+内存容量   D. 网络带宽</strong></p>
<p><strong>7. 以太坊系统智能合约采用的系统默认开发语言是（    ）。</strong></p>
<p><strong>A. Java       B. Go        C. Solidity       D. JavaScript</strong></p>
<p><strong>8. 在以太坊系统中，一个创建合约类型的交易的接收方地址（Recipient）字段值应为（    ）。</strong></p>
<p><strong>A.节点地址    B.空          C.外部账户地址     D.合约账户地址</strong></p>
<p><strong>9. 以太坊系统除了正在使用的PoW共识机制外，计划在后续版本中支持（   ）共识机制。</strong></p>
<p><strong>A. Paxos      B. PoS        C. DPoS        D. PBFT</strong></p>
<p><strong>（三）简答题（任选3道）</strong></p>
<p><strong>1. 请简述以太坊系统的区块链中各个区块是怎么链接的？</strong></p>
<p><strong>2. 请简述以太坊系统的账户地址是怎样生成的？</strong></p>
<p><strong>3. 请简单分析以太坊系统PoW共识机制节点竞争计算生成新区块的过程？</strong></p>
<p><strong>4. 请简述为什么以太坊系统要引入叔区块（UncleBlock）机制？</strong></p>
<p><strong>5. 请简单分析以太坊系统的账户与与传统的中心化系统的账户具有的不同之处？</strong></p>
<p><strong>6. 请简述以太坊系统PoW共识机制采用的Ethash算法的主要计算过程？</strong></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://kizzy899.github.io">kizy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://kizzy899.github.io/2024/12/11/%E9%93%BE%E5%8E%9F%E2%80%94%E2%80%94%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%B3%BB%E7%BB%9F/">https://kizzy899.github.io/2024/12/11/%E9%93%BE%E5%8E%9F%E2%80%94%E2%80%94%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%B3%BB%E7%BB%9F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://kizzy899.github.io" target="_blank">EIGHTJIU</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/">区块链</a></div><div class="post-share"><div class="social-share" data-image="/cover/cover9.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/12/16/PBFT%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95/" title="PBFT共识算法"><img class="cover" src="/cover/cover4.jpg" onerror="onerror=null;src='/img/404page.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">PBFT共识算法</div></div><div class="info-2"><div class="info-item-1">PBFT共识算法PBFT算法概述定义与介绍定义Practical Byzantine Fault Tolerance（PBFT）是一种用于分布式计算和分布式系统中的共识算法，旨在解决拜占庭容错问题。（拜占庭容错问题涉及到在分布式系统中存在故障或恶意节点的情况下，如何确保系统能够维持一致性）。 介绍PBFT是一种状态机副本复制算法，即服务作为状态机进行建模，状态机在分布式系统的不同节点进行副本复制。每个状态机的副本都保存了服务的状态，同时也实现了服务的操作。将所有的副本组成的集合使用大写字母R表示，使用0到|R|-1的整数表示每一个副本。为了描述方便，假设|R|&#x3D;3f+1，这里f是有可能失效的副本的最大个数。尽管可以存在多于3f+1个副本，但是额外的副本除了降低性能之外不能提高可靠性。 PBFT算法中节点只有两种角色，主节点（primary）和副本（replica），两种角色之间可以相互转换。两者之间的转换又引入了视图（view）的概念，视图在PBFT算法中起到逻辑时钟的作用。    特点与工作原理特点 拜占庭容错： PBFT旨在解决拜占庭容错问题，这意味着系统可以继续正...</div></div></div></a><a class="pagination-related" href="/2024/12/08/%E9%93%BE%E5%8E%9F%E2%80%94%E2%80%94%E6%AF%94%E7%89%B9%E5%B8%81%E7%B3%BB%E7%BB%9F/" title="链原——比特币系统"><img class="cover" src="/cover/cover11.jpg" onerror="onerror=null;src='/img/404page.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">链原——比特币系统</div></div><div class="info-2"><div class="info-item-1">比特币区块链系统架构背景：比特币系统作为世界上第一个大规模成功运营的区块链系统，也建立了区块链系统体系结构的标准——P2P体系结构，即对等网络结构。  每个节点都通过底层的P2P网络协议发现、连接其它区块链网络节点，并提供P2P网络的路由功能；  个节点可以通过PoW共识机制竞争计算新区块的出块权（俗称“挖矿”）；  每个节点都可以存储完整的区块链与账本数据，每个节点都可以发起和监听比特币网络上的交易信息，验证每个交易和区块的合法性   关于节点节点总体上可以分为“全节点”、“轻节点”等两大类，其中发挥核心作用的是全节点。 全节点 全节点是比特币系统中功能最完整的节点，全节点一般要求保持一直在线，主要负责执行以下功能：  参与区块记账权的竞争，通过PoW共识机制竞争下一个新区块的出块权，获得出块权的节点将获得系统激励，激励的方式就是奖励一定数量的比特币，也是比特币这种加密货币的唯一产生来源。  存储完整的区块链与账本数据，每个全节点都保存了一个相同区块链与账本数据副本，自2009年比特币系统上线运行至今，每个全节点的区块链与账本数据存储容量已超过500GB。  提供P2P网络路由...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/04/12/DAO/" title="DAO"><img class="cover" src="/cover/cover2.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-12</div><div class="info-item-2">DAO</div></div><div class="info-2"><div class="info-item-1">一、DAO 基础概念什么是 DAO（去中心化自治组织）定义：  Decentralized：基于区块链，由利益相关者共同决策。 Autonomous：运行逻辑由智能合约执行，在特定情况下无需人工干预。 DAO 是一个自主存在于网络中的实体，由公开透明的代码编码组织规则，管理组织资产。  特点：  社区治理：以集体方式作出决策（某种方式为自己做决定）。 资产管理：拥有和分配内部资产的能力（包含内部资产，且它有能力将该资产用于奖励某些活动）。  DAO vs 传统公司   特性 DAO 公司    管理结构 自下而上，去中心化 自上而下，层级分明   决策透明度 公开透明 相对封闭   成员参与方式 自主发起，自愿参与 由雇佣关系或股份结构决定   目标 社区共识，长期共赢 股东利润最大化   DAO 的类别 Protocol DAO：Uniswap、MakerDAO   Social DAO：SeedClub、FWB   Venture DAO：CultDAO   Media DAO：Bankless DAO   Grant DAO：Gitcoin   dao究竟在做什么（1）去中...</div></div></div></a><a class="pagination-related" href="/2025/06/07/ERC721/" title="ERC721"><img class="cover" src="/cover/cover2.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-07</div><div class="info-item-2">ERC721</div></div><div class="info-2"><div class="info-item-1">12import &quot;@openzeppelin/contracts/token/ERC721/ERC721.sol&quot;;    定义非同质化代币（也称为契约）的标准接口。 每个符合 ERC-721 的合约都必须实现ERC721和ERC165接口  它更大的想象空间在于将物理世界的资产映射到区块链上。  谜恋猫是第一个实现了ERC721 标准的去中心化应用  ERC20代币是可置换的，且可细分为N份（1 &#x3D; 10 * 0.1）, 而ERC721的Token最小的单位为1，无法再分割。    如果同一个集合的两个物品具有不同的特征，这两个物品是非同质的，而同质是某个部分或数量可以被另一个同等部分或数量所代替。  钱包接口123456789101112131415/// @dev Note: the ERC-165 identifier for this interface is 0x150b7a02.interface ERC721TokenReceiver &#123;    /// @notice Handle the receipt of an NF...</div></div></div></a><a class="pagination-related" href="/2025/03/29/DEX/" title="DEX&amp;CEX"><img class="cover" src="/cover/cover4.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-29</div><div class="info-item-2">DEX&amp;CEX</div></div><div class="info-2"><div class="info-item-1">DEX &amp; CEXCEX vs DEX 核心知识点总结1. CEX（中心化交易所） 托管模式：用户资产由交易所控制，存在平台跑路风险。 透明度低：交易记录不公开，依赖交易所的内部账本。 流动性来源：主要依赖专业做市商提供深度。 KYC要求：必须完成身份认证才能交易（合规要求）。 典型代表：Binance、Coinbase、Kraken。  2. DEX（去中心化交易所） 非托管模式：用户自持私钥，资产存于个人钱包（如MetaMask）。 链上透明：所有交易记录公开可查（如Etherscan）。 流动性来源： AMM 模式（如Uniswap）：依赖流动性池（LP提供）。 订单簿模式（如dYdX）：可能结合做市商。   无需许可：无需KYC，支持匿名交易。 典型代表：Uniswap、SushiSwap、dYdX。  Token的作用？ 作为数字资产在区块链上流通   代表项目权益或使用权   提供激励机制（如质押、治理）   增强生态内流动性   早期融资：帮助项目方（尤其是小团队）筹集启动资金（如通过IDO&#x2F;IEO）。 社区治理：代币持有者可参与DAO投票，影响项...</div></div></div></a><a class="pagination-related" href="/2025/05/24/Foundry%E6%A1%86%E6%9E%B6/" title="Foundry框架"><img class="cover" src="/cover/cover8.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-24</div><div class="info-item-2">Foundry框架</div></div><div class="info-2"><div class="info-item-1">定义Foundry 是一个由 Paradigm开发的智能合约开发工具包，用于在以太坊区块链上开发应用程序。Foundry 基于 Rust 运行，提供多种工具来开发和测试 Solidity 智能合约。Foundry 具有一套 CLI 命令，使创建新项目、编译、部署和与合约交互变得简单。 创建Foundry项目 安装命令：  12curl -L &lt;https://foundry.paradigm.xyz&gt; | bash  //下载foundryupfoundryup   //运行它安装 Foundry   安装后，有三个命令行工具 forge, cast, anvil 组成  forge: 用来执行初始化项目、管理依赖、测试、构建、部署智能合约 ; cast: 执行以太坊 RPC 调用的命令行工具, 进行智能合约调用、发送交易或检索任何类型的链数据 anvil: 创建一个本地测试网节点, 也可以用来分叉其他与 EVM 兼容的网络。    初始化  通过 forge 的 forge init 初始化项目 1forge init &lt;project_name&gt;  i...</div></div></div></a><a class="pagination-related" href="/2025/05/24/Hardhat/" title="Hardhat框架"><img class="cover" src="/cover/cover10.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-24</div><div class="info-item-2">Hardhat框架</div></div><div class="info-2"><div class="info-item-1">定义Hardhat 是一个由 Nomiclabs 构建和维护的以太坊智能合约开发环境。它是一个可扩展的 Javascript 框架，提供了一套管理智能合约生命周期的工具和功能，包括编译、部署、测试和调试。 可以用npm直接安装： 12npm install hardhatnpx hardhat init     高度可定制性：Hardhat 的插件系统允许开发者通过自定义插件扩展其功能。  Hardhat 使用 Node 进行包管理，如果你熟悉 Node 及 Javascript， Hardhat 将非常简单上手。 创建Hardhat项目 创建项目目录  12mkdir hardhat-tutorialcd hardhat-tutorial   初始化Node项目  1npm init     安装Hardhat  1npm install --save-dev hardhat   将hatdhat添加到 package.json 的 devDependencies 中，而不是 dependencies 中   在安装Hatdhat的目录下运行 1npx hardhat    使...</div></div></div></a><a class="pagination-related" href="/2024/12/26/FISCOBCOS%E8%81%94%E7%9B%9F%E9%93%BE/" title="FISCO BCOS联盟链"><img class="cover" src="/cover/cover3.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-26</div><div class="info-item-2">FISCO BCOS联盟链</div></div><div class="info-2"><div class="info-item-1">FISCO BCOS介绍FISCO BCOS 是一个稳定、高效、安全的区块链底层平台。联盟链需要多家机构来组成联盟，所以FISCO BCOS 支持多群组概念，这意味着多个组织可以通过FISCOBCOS的联盟链组成多个联盟，而且联盟中可以允许共同的组织节点。如下图所示，在多群组技术下FISCO BCOS可以支持众多应用领域。 逻辑架构以下是FISCO BCOS 的逻辑架构，分为：基础层、互联核心层、链核心层、管理层和接口层。  基础层 基础层提供区块链的基础数据结构和算法库，包括密码学算法、隐私算法等。 链核心层 链核心层主要实现区块链的链式数据结构和数据存储（分布式存储），采用了不同的数据库（LevelDB、MySQL、Qracle）来存储区块数据。 互联核心层 互联核心层实现了区块链的基础 P2P 网络通信、共识机制和区块同步机制。 管理层 相对于区块链基础架构，FISCO BCOS 细分出了管理层，实现区块链的管理功能，比如说参数配置、账本管理等。 接口层 接口层主要对应的是应用层，面向区块链用户，提供交互式控制台与各类应用接口。同时还包括智能合约与DApp。 区块链交易流程...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/aaaset/touxiang.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">kizy</div><div class="author-info-description">rainbow</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">57</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/kizzy899"><i class="fab fa-github"></i><span>my github</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/kizzy899" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Sampre avanti</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.</span> <span class="toc-text">以太坊系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E5%8C%BA%E5%9D%97%E9%93%BE%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84"><span class="toc-number">1.1.</span> <span class="toc-text">以太坊区块链系统架构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84"><span class="toc-number">1.1.1.</span> <span class="toc-text">系统逻辑架构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%B1%82"><span class="toc-number">1.2.</span> <span class="toc-text">以太坊系统数据层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%BA%E5%9D%97%E4%B8%8E%E5%8C%BA%E5%9D%97%E9%93%BE"><span class="toc-number">1.2.1.</span> <span class="toc-text">区块与区块链</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%A6%E6%9C%AC%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.2.</span> <span class="toc-text">账本数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.3.</span> <span class="toc-text">交易数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.4.</span> <span class="toc-text">状态数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">1.3.</span> <span class="toc-text">以太坊系统网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#P2P%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E4%B8%8E%E8%8A%82%E7%82%B9"><span class="toc-number">1.3.1.</span> <span class="toc-text">P2P网络结构与节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E5%8F%91%E7%8E%B0%E7%AE%A1%E7%90%86"><span class="toc-number">1.3.2.</span> <span class="toc-text">节点发现管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">1.3.3.</span> <span class="toc-text">节点连接管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%98%93%E5%B9%BF%E6%92%AD"><span class="toc-number">1.3.4.</span> <span class="toc-text">交易广播</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%98%93%E6%B1%A0"><span class="toc-number">1.3.5.</span> <span class="toc-text">交易池</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%BA%E5%9D%97%E5%B9%BF%E6%92%AD%E4%B8%8E%E5%90%8C%E6%AD%A5"><span class="toc-number">1.3.6.</span> <span class="toc-text">区块广播与同步</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%B3%BB%E7%BB%9F%E5%85%B1%E8%AF%86%E5%B1%82"><span class="toc-number">1.4.</span> <span class="toc-text">以太坊系统共识层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PoW%E5%B7%A5%E4%BD%9C%E9%87%8F%E8%AF%81%E6%98%8E%E5%85%B1%E8%AF%86%E6%9C%BA%E5%88%B6"><span class="toc-number">1.4.1.</span> <span class="toc-text">PoW工作量证明共识机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PoS%E5%85%B1%E8%AF%86%E6%9C%BA%E5%88%B6"><span class="toc-number">1.4.2.</span> <span class="toc-text">PoS共识机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%B3%BB%E7%BB%9F%E6%BF%80%E5%8A%B1%E5%B1%82"><span class="toc-number">1.5.</span> <span class="toc-text">以太坊系统激励层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#l%E5%8F%94%E5%9D%97%E6%9C%BA%E5%88%B6"><span class="toc-number">1.5.1.</span> <span class="toc-text">l叔块机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%B3%BB%E7%BB%9F%E5%90%88%E7%BA%A6%E5%B1%82"><span class="toc-number">1.6.</span> <span class="toc-text">以太坊系统合约层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E6%9C%BA%E5%88%B6"><span class="toc-number">1.6.1.</span> <span class="toc-text">智能合约机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BE%E5%90%8E"><span class="toc-number">1.7.</span> <span class="toc-text">课后</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url(/img/aaaset/title.png);"><div class="footer-other"><div class="footer-copyright"></div><div class="footer_custom_text">-899</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const createScriptElement = config => {
    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => {
      ele.setAttribute(key, value)
    })
    return ele
  }

  const loadGiscus = (el = document, key) => {
    const mappingConfig = isShuoshuo
      ? { 'data-mapping': 'specific', 'data-term': key }
      : { 'data-mapping': (option && option['data-mapping']) || 'pathname' }

    const giscusConfig = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'kizzy899/kizzy899.github.io',
      'data-repo-id': 'R_kgDONCC1iQ',
      'data-category-id': 'DIC_kwDONCC1ic4CtwTu',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true,
      ...option,
      ...mappingConfig
    }

    const scriptElement = createScriptElement(giscusConfig)

    el.querySelector('#giscus-wrap').appendChild(scriptElement)

    if (isShuoshuo) {
      window.shuoshuoComment.destroyGiscus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.app')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if (isShuoshuo) {
    'Giscus' === 'Giscus'
      ? window.shuoshuoComment = { loadComment: loadGiscus }
      : window.loadOtherComment = loadGiscus
    return
  }

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script></div><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="8,9,小,金" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>